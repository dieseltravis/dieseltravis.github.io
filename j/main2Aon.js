!function(t,e){e(function(){var o=e(t),n=e("html"),a=e("body"),i=a.children("header"),s=a.children("nav"),c=e("#weather"),r=new Date,l=r.getHours(),d=e("#disqus_thread"),u=(e("a[href$='#disqus_thread']"),e("#disqus_comments")),h="traviblog",f=function(){if(d.length>0){var e=t.document.createElement("script");d.empty(),e.type="text/javascript",e.async=!0,e.src="//"+h+".disqus.com/embed.js",t.document.getElementsByTagName("body")[0].appendChild(e)}},p=function(){},m=function(){var e="011419802833879112589:cqsgnwonlw4",o=t.document.createElement("script"),n=t.document.getElementsByTagName("script")[0];o.type="text/javascript",o.async=!0,o.src="//www.google.com/cse/cse.js?cx="+e,n.parentNode.insertBefore(o,n)};if(o.on("scroll",function(){var t=o.scrollTop();i.css({bottom:1.5*t+"px"}),s.css({top:200+t*-.5+"px"}),c.css({bottom:.25*t-20+"px"})}).on("load",function(){m(),p()}),t.disqus_shortname=h,u.on("click",function(t){f(),t.preventDefault()}),n.addClass("hour-"+l),a.addClass("daylight"),t.history&&t.history.pushState){var y=e("head>title"),g=e("main"),v=e("body>nav>ul"),j=function(o){e.ajax({cache:!0,dataType:"json",url:o+"/json.json"}).fail(function(e,n,a){t.console.log("swapPage fail"),t.console.log(e),t.console.log(n),t.console.log(a),t.location=o}).done(function(n){n&&(y.text(n.title),g.html("<article></article>"),g.find("article").html(n.bodyArticleHtml),e("li:lt("+n.bodyNavItems.length+")",v).each(function(t){n.bodyNavItems[t]&&e("a",this).attr("href",n.bodyNavItems[t].href).attr("rel",n.bodyNavItems[t].pageRel||"").html(n.bodyNavItems[t].text)}),u.attr("href",o),p(),t.history.pushState(null,null,o))})};e("nav a[href*='/posts/'][rel!='archives']").on("click",function(e){/\/posts\//i.test(t.location)&&(j(this.href),e.preventDefault())}).on("mouseenter",function(){var t=e(this);t.data("iscached")||e.ajax({cache:!0,dataType:"json",url:t.attr("href")+"/json.json"}).done(function(){t.data("iscached",!0)})}),o.on("load",function(){t.setTimeout(function(){o.on("popstate",function(){j(t.location.pathname)})},100)})}if(t.navigator.geolocation){var w=function(t){return'<i class="mover"><i class="iconBox"><i class="wxicon '+t+'">'+t+"</i></i></i>"},x=function(e){return t.console.log(e),/thunder/i.test(e)?"thunder":/snow|blizzard/i.test(e)?"snow":/ice|sleet|freez/i.test(e)?"ice":/rain|drizzle|shower/i.test(e)?"rain":/fog/i.test(e)?"fog":/mist/i.test(e)?"mist":/sun/i.test(e)?"sun":/cloud|overcast/i.test(e)?"cloudy":/clear/i.test(e)?"clear":void 0};t.navigator.geolocation.getCurrentPosition(function(o){var n=o.coords.latitude,a=o.coords.longitude;e.ajax({url:"//api.worldweatheronline.com/free/v1/weather.ashx?q="+n+","+a+"&format=json&num_of_days=1&cc=yes&key=kgcjbeaq7kt3tupchz7wx8b4",beforeSend:function(t){t.setRequestHeader&&t.setRequestHeader("Content-type","application/json"),t.overrideMimeType&&t.overrideMimeType("application/json; charset=utf-8")},cache:!0,contentType:"application/json; charset=utf-8",crossDomain:!0,data:"{ }",dataType:"jsonp",type:"GET",xhrFields:{withCredentials:!0}}).fail(function(e,o,n){t.console.log("weather ajax error:\n"+e+"\n"+o+"\n"+n)}).done(function(e){e&&e.data&&e.data.current_condition?c.html(w(x(e.data.current_condition[0].weatherDesc[0].value))):t.console.log("weather ajax data:\n"+e+"\n"+typeof e)})},function(e){t.console.log("geolocation error:\n"+e)})}})}(this,this.jQuery);