!function(t,e){e(function(){var o=e(t),n=e("html"),a=e("body"),s=a.children("header"),c=a.children("nav"),i=e("#weather"),r=new Date,l=r.getHours(),d=e("#disqus_thread"),h=e("a[href$='#disqus_thread']"),u=e("#disqus_comments"),p="traviblog",f=function(){if(d.length>0){var e=t.document.createElement("script");d.empty(),e.type="text/javascript",e.async=!0,e.src="//"+p+".disqus.com/embed.js",t.document.getElementsByTagName("body")[0].appendChild(e)}},m=function(){if(h.length>0){var e=t.document.createElement("script");e.async=!0,e.type="text/javascript",e.src="//"+p+".disqus.com/count.js",t.document.getElementsByTagName("body")[0].appendChild(e)}};if(a.find("a[href^='http']").each(function(){var t=e(this);0===t.children("img").length&&t.addClass("external").css("background-image","url('http://"+this.hostname+".getfavicon.appspot.com/"+this.href+"')")}),o.on("scroll",function(){var t=o.scrollTop();s.css({bottom:1.5*t+"px"}),c.css({top:200+t*-.5+"px"}),i.css({bottom:.25*t-20+"px"})}).on("load",function(){m()}),t.disqus_shortname=p,u.on("click",function(t){f(),t.preventDefault()}),n.addClass("hour-"+l),a.addClass("daylight"),t.history&&t.history.pushState){var y=e("head>title"),g=e("main"),v=e("body>nav>ul"),j=function(o){e.ajax({cache:!0,dataType:"json",url:o+"/json.json"}).fail(function(e,n,a){t.console.log("swapPage fail"),t.console.log(e),t.console.log(n),t.console.log(a),t.location=o}).done(function(n){n&&(y.text(n.title),g.html("<article></article>"),g.find("article").html(n.bodyArticleHtml),e("li:lt("+n.bodyNavItems.length+")",v).each(function(t){n.bodyNavItems[t]&&e("a",this).attr("href",n.bodyNavItems[t].href).attr("rel",n.bodyNavItems[t].pageRel||"").html(n.bodyNavItems[t].text)}),u.attr("href",o),m(),t.history.pushState(null,null,o))})};e("nav a[href*='/posts/'][rel!='archives']").on("click",function(e){/\/posts\//i.test(t.location)&&(j(this.href),e.preventDefault())}).on("mouseenter",function(){var t=e(this);t.data("iscached")||e.ajax({cache:!0,dataType:"json",url:t.attr("href")+"/json.json"}).done(function(){t.data("iscached",!0)})}),o.on("load",function(){t.setTimeout(function(){o.on("popstate",function(){j(t.location.pathname)})},100)})}t.navigator.geolocation&&t.navigator.geolocation.getCurrentPosition(function(o){var n=o.coords.latitude,a=o.coords.longitude;e.ajax({url:"//api.worldweatheronline.com/free/v1/weather.ashx?q="+n+","+a+"&format=json&num_of_days=1&cc=yes&key=kgcjbeaq7kt3tupchz7wx8b4",beforeSend:function(t){t.setRequestHeader&&t.setRequestHeader("Content-type","application/json"),t.overrideMimeType&&t.overrideMimeType("application/json; charset=utf-8")},cache:!0,contentType:"application/json; charset=utf-8",crossDomain:!0,data:"{ }",dataType:"jsonp",type:"GET",xhrFields:{withCredentials:!0},success:function(e){e&&e.data&&e.data.current_condition?i.html(e.data.current_condition[0].weatherDesc[0].value):t.console.log("ajax data:\n"+e+"\n"+typeof e)},error:function(e,o,n){t.console.log("ajax error:\n"+e+"\n"+o+"\n"+n)}})},function(e){t.console.log("geolocation error:\n"+e)})})}(this,this.jQuery);