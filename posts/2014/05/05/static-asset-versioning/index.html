<!doctype html><html lang="en-us" class="no-js"><head><meta name="viewport" content="width=device-width"/><title>Static Asset Versioning</title><meta name="description" content="A lazy and easy way to version assets."/><meta name="author" content="Travis Hardiman"/><meta name="copyright" content="© Travis Hardiman, et al. 1979-2079."/><link rel="stylesheet" href="/s/mainV4m.css"/><link rel="canonical" href="http://dieseltravis.github.io/posts/2014/05/05/static-asset-versioning"/><link rel="alternate" type="application/rss+xml" title="RSS" href="http://dieseltravis.github.io/rss.rss"/><link rel="alternate" type="application/atom+xml" title="Atom" href="http://dieseltravis.github.io/atom.atom"/></head><body><header><hgroup><h1><a href="/" rel="home">traviblog</a></h1><h2>the enterprising blog with the home-made touch</h2></hgroup></header><main><article class="h-entry"><hgroup><h3><time datetime="2014-05-06T03:00:00.000Z" pubdate="pubdate" class="dt-published">2014-05-05</time></h3><h1><a href="/posts/2014/05/05/static-asset-versioning" class="u-url p-name">Static Asset Versioning</a></h1><h2 class="p-summary"></h2></hgroup><div class="e-content"><p>One of the things that I used with <a href="https://github.com/dieseltravis/suo">suo</a>, was versioning CSS and JS files. There are existing ways of doing this with <a href="https://github.com/theasta/grunt-assets-versioning">grunt</a>, <a href="https://www.npmjs.org/package/node-version-assets">node</a>, or by hand. Since I'm still new to how node works I thought it would be a good learning exercise. The old way of doing this was to append a querystring to the linked file but certain firewalls don't cache files with querystrings.</p><p>I initially tried generating checksums but the resulting hashes were too huge. I didn't want to use more bytes than necessary so I used the last modified datetime of the file. I basically just converted the time in milliseconds to a custom base. <a href="https://gist.github.com/dieseltravis/9848160">Nothing too special about the custom number base code</a>. The 66 characters I used were all ones that don't have to be escaped when they're used in URLs. If they had to be escaped it would just add bytes.</p><p>To shorten the hashes more I divided by 60,000 to use the nearest minute, and then I subtracted a more recent date that would serve as the new zero. As of right now the hashes are just 3 characters. I wrote a little <a href="https://github.com/dieseltravis/suo/blob/master/suo.js#L328">helper for handlebars</a> that uses the original filename as a key and the renamed as the value.</p><p>After all this, it turns out that Github Pages only sets the cache for 10 minutes instead of the far future which defeats the whole purpose altogether.</p></div></article></main><nav><h2>Other Stuff</h2><ul><li><a href="/posts/2014/05/05/static-asset-versioning" rel="self">Static Asset Versioning</a></li><li><a href="/posts/2014/04/05/frost-pisst" rel="next">Frost Pisst</a></li><li><a href="/posts/2011/05/13/adding-an-easy-shortcut-to-the-jshint-javascript-validator-to-visual-studio">Adding An Easy Shortcut to the JSHint javascript validator to Visual Studio</a></li><li><a href="/posts/2010/07/26/embedding-an-xslt-as-a-string-in-a-dll-binary">Embedding an XSLT as a string in a DLL binary</a></li><li><a href="/posts/2010/07/19/compiling-an-xslt-into-a-dll-binary">Compiling an XSLT into a DLL binary</a></li><li><a href="/posts" rel="archives ">Archive</a></li><li><a href="/about" rel="about ">About</a></li><li><gcse:searchbox-only></gcse:searchbox-only></li></ul><h3>Folks</h3><ul><li><a href="http://ern.me/" rel="friend met co-worker colleague" title="Ern is my co-worker">Ern</a></li><li><a href="http://www.larryroth.net/" rel="friend met co-worker colleague" title="Larry is my boss">Larry</a></li><li><a href="http://ralphwhitbeck.com/" rel="friend met" title="Ralph is a former co-worker">Ralph</a></li><li><a href="http://sherrybdesign.com/" rel="friend met co-resident spouse sweetheart" title="Sherry is a Graphic Designer and my wife">Sherry</a></li></ul><h3>Work-related</h3><ul><li><a href="http://brandlogic.com/" title="Brandlogic is where I work">Brandlogic</a></li><li><a href="http://www.corebrand.com/" title="CoreBrand is a full service brand consultancy">CoreBrand</a></li><li><a href="http://www.tapdash.net/" title="TapDash, made by Brandlogic, is a real-time view of customer experience">TapDash</a></li></ul></nav><div id="comments"><a id="disqus_comments" href="/posts/2014/05/05/static-asset-versioning#disqus_thread">Comments</a><div id="disqus_thread"></div><p><a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></p></div><footer><h2>© Travis Hardiman, et al. 1979-2079.</h2><p>All puns intentional even if stated otherwise, all posts are owned by their respective owners, any code posted is public domain unless stated otherwise</p></footer><div id="weather"></div><script src="//code.jquery.com/jquery-2.1.0.min.js"></script><script src="/j/mainUNq.js"></script></body></html>