{"relativePath":"/posts/2014/05/05/static-asset-versioning","comments":"","pubDate":"2014-05-05T23:00:00.0000000-04:00","title":"Static Asset Versioning","subtitle":"","intro":"A lazy and easy way to version assets.","categories":["javascript","programming"],"body":"&lt;p&gt;One of the things that I used with &lt;a href=&quot;https://github.com/dieseltravis/suo&quot;&gt;suo&lt;/a&gt;, was versioning CSS and JS files. There are existing ways of doing this with &lt;a href=&quot;https://github.com/theasta/grunt-assets-versioning&quot;&gt;grunt&lt;/a&gt;, &lt;a href=&quot;https://www.npmjs.org/package/node-version-assets&quot;&gt;node&lt;/a&gt;, or by hand. Since I&#x27;m still new to how node works I thought it would be a good learning exercise. The old way of doing this was to append a querystring to the linked file but certain firewalls don&#x27;t cache files with querystrings.&lt;/p&gt;&lt;p&gt;I initially tried generating checksums but the resulting hashes were too huge. I didn&#x27;t want to use more bytes than necessary so I used the last modified datetime of the file. I basically just converted the time in milliseconds to a custom base. &lt;a href=&quot;https://gist.github.com/dieseltravis/9848160&quot;&gt;Nothing too special about the custom number base code&lt;/a&gt;. The 66 characters I used were all ones that don&#x27;t have to be escaped when they&#x27;re used in URLs. If they had to be escaped it would just add bytes.&lt;/p&gt;&lt;p&gt;To shorten the hashes more I divided by 60,000 to use the nearest minute, and then I subtracted a more recent date that would serve as the new zero. As of right now the hashes are just 3 characters. I wrote a little &lt;a href=&quot;https://github.com/dieseltravis/suo/blob/master/suo.js#L328&quot;&gt;helper for handlebars&lt;/a&gt; that uses the original filename as a key and the renamed as the value.&lt;/p&gt;&lt;p&gt;After all this, it turns out that Github Pages only sets the cache for 10 minutes instead of the far future which defeats the whole purpose altogether.&lt;/p&gt;","enclosures":[],"source":{"url":"https://github.com/dieseltravis/suo","title":"dieseltravis / suo"},"changefreq":"monthly","priority":"1.0","bodyArticleHtml":"<hgroup><h3><time datetime=\"2014-05-06T03:00:00.000Z\" pubdate=\"pubdate\">2014-05-05</time></h3><h1><a href=\"http://dieseltravis.github.io/posts/2014/05/05/static-asset-versioning\">Static Asset Versioning</a></h1><h2></h2></hgroup><p>One of the things that I used with <a href="https:"bodyNavItems":[{"pageRel":"prev","href":"/posts/2014/05/20/navigator-geolocation","text":"Hey, Travis, Why Do You Need My Location?"},{"pageRel":"self","href":"/posts/2014/05/05/static-asset-versioning","text":"Static Asset Versioning"},{"pageRel":"next","href":"/posts/2014/04/05/frost-pisst","text":"Frost Pisst"},{"href":"/posts/2011/05/13/adding-an-easy-shortcut-to-the-jshint-javascript-validator-to-visual-studio","text":"Adding An Easy Shortcut to the JSHint javascript validator to Visual Studio"},{"href":"/posts/2010/07/26/embedding-an-xslt-as-a-string-in-a-dll-binary","text":"Embedding an XSLT as a string in a DLL binary"}]}